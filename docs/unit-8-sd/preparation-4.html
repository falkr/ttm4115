<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">
  <meta name="generator" content="">
  <title>TTM4115</title>
  <link rel="canonical" href="https://edu.iik.ntnu.no">
  <!-- Bootstrap core CSS -->
  <link href="../assets/bootstrap.min.css" rel="stylesheet">
  <!-- Custom styles for this template -->
  <link href="../assets/style.css" rel="stylesheet">
  <link rel="stylesheet" href="../assets/bootstrap-icons.css">
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="../assets/anchor.js"></script>
  <script src="../assets/script-aside.js"></script>
  <style type="text/css">
    a.ntnu-button {
    font: 600 14px "Source Sans Pro", Georgia, serif;
    background: #fff;
    color: #00509e;
    border: 1px solid #00509e;
    border-color: #00509e !important;
    border-style: solid !important;
    border-radius: 10rem;
    display: inline-block;
    padding: 5px 15px;
    height: auto;
    font-weight: bold;
    line-height: 1.5em;
    text-align: center;
    vertical-align: top;
    cursor: pointer;
    text-decoration: none
}

a.ntnu-button:hover {
    background: #00509e;
    color: #fff;
    text-decoration: none
}
.person-card img {
  width: 56px;
  border: 1px solid #eee;
}

.person-card-name {
  font-weight: 600;
}

.person-card-email {
  font-size: 0.8em;
}

.person-card-detail {
  font-size: 0.8em;
}
div.figure {
  padding: 20px 0 20px 0;
  width: 100%;
}

div.figurefullwitdth {
  padding: 20px 0 20px 0;
  margin-left: -33px;
  margin-right: -33px;
  width: 100%;
}
div.goals ul,
div.goals ul li {
  padding: 0;
  margin: 0;
  list-style: none;
}

div.goals ul {
  margin: 2em 0;
}

div.goals ul li {
  margin: 1em;
  margin-left: 3em;
}

div.goals ul li:before {
  content: '\f26a';
  font-family: bootstrap-icons !important;
  font-size: 20;
  float: left;
  margin-left: -1.5em;
  color: #00509e;
}



table.weekplan {
  width: 100%;
  table-layout: fixed;
}

table.weekplan td {
  background-color: #1481b8;
  color: white;
}

table.weekplan td, table.weekplan th {
  text-align: center;
}

table.weekplan td:empty {
  background-color: white;
}

table.weekplan td:first-child {
  background-color: white;
  color: grey;
}

table.weekplan a {
  font-weight:bold;
  color: white;
  text-decoration: underline;
}

  </style>
</head>

<body>
  
  



<nav class="navbar navbar-expand-lg navbar shadow-sm">
  <div class="container-fluid">
    <a class="navbar-brand" href="https://ntnu.edu" title="NTNU Homepage">
      <img id="header_logo" alt="NTNU Hjemmeside" width="120px" src="https://www.ntnu.no/o/ntnu-theme/images/logo_ntnu.svg" height="23px">
    </a>
    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavDropdown">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="../index.html">TTM4115</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Units
          </a>
          <ul class="dropdown-menu dropdown-menu">
            <a class="dropdown-item" href="../unit-1-setup/index.html">Unit 1: Introduction and Setup</a>
            <a class="dropdown-item" href="../unit-2-models/index.html">Unit 2: Modeling and Deployment Diagrams</a>
            <a class="dropdown-item" href="../unit-3-stm/index.html">Unit 3: State Machines</a>
            <a class="dropdown-item" href="../unit-4-req/index.html">Unit 4: User Requirements</a>
            <a class="dropdown-item" href="../unit-5-stmpy/index.html">Unit 5: State Machines in Python</a>
            <a class="dropdown-item" href="../unit-6-agile/index.html">Unit 6: Agile Development</a>
            <a class="dropdown-item" href="../unit-7-comm/index.html">Unit 7: Communication</a>
            <a class="dropdown-item" href="../unit-8-sd/index.html">Unit 8: Interactions</a>
            <a class="dropdown-item" href="../unit-9-comp/index.html">Unit 9: Components</a>
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Project
          </a>
          <ul class="dropdown-menu dropdown-menu">
            <a class="dropdown-item" href="../project/index.html">Deliveries</a>
            <a class="dropdown-item" href="../project/deliveries-t1.html">Specification 1</a>
            <a class="dropdown-item" href="../project/deliveries-i1.html">Feedback on Specification 1</a>
            <a class="dropdown-item" href="../project/deliveries-t2.html">Specification 2</a>
            <a class="dropdown-item" href="../project/deliveries-i2.html">Feedback on Specification 2</a>
            <a class="dropdown-item" href="../project/deliveries-t3.html">Specification 3 (Final)</a>
            <a class="dropdown-item" href="../project/deliveries-i3.html">Feedback on Specification 3</a>
            
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Learning
          </a>
          <ul class="dropdown-menu dropdown-menu">
            <a class="dropdown-item" href="../learning/feedback.html">Feedback</a>
            <a class="dropdown-item" href="../learning/goals.html">Learning Goals</a>
            <a class="dropdown-item" href="../learning/grading.html">Grading</a>
            <a class="dropdown-item" href="../learning/reflection.html">Reflection</a>
            <a class="dropdown-item" href="../learning/tbl.html">Team-Based Learning</a>
            <a class="dropdown-item" href="../learning/teamwork.html">Teamwork</a>
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Tools
          </a>
          <ul class="dropdown-menu dropdown-menu">
            <a class="dropdown-item" href="../tools/index.html">Tools</a>
            <!--<a class="dropdown-item" href="../tools/tools-python.html">Python</a>-->
            <a class="dropdown-item" href="../tools/tools-gui.html">GUIs in Python</a>    
            <a class="dropdown-item" href="../tools/tools-mqtt.html">MQTT</a>            
            <a class="dropdown-item" href="../tools/tools-notebooks.html">Notebooks</a>
            <a class="dropdown-item" href="../tools/tools-stmpy.html">STMPY</a>            
          </ul>
        </li>
      </ul>
      <div class="bg-light border ms-auto"></div>
        <div>
        <a class="nav-link" href="../schedule.html"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-calendar3" viewBox="0 0 16 16">
          <path d="M14 0H2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM1 3.857C1 3.384 1.448 3 2 3h12c.552 0 1 .384 1 .857v10.286c0 .473-.448.857-1 .857H2c-.552 0-1-.384-1-.857V3.857z"/>
          <path d="M6.5 7a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
        </svg></a>
      </div>
    </div>
  </div>
</nav>






  <main class="container">

    <div class="row g-5 justify-content-md-center pb-5">



      <div class="col-md-9" style="margin-top: 6rem;">
        <div class="page">
<nav style="--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E&#34;);" aria-label="breadcrumb">
<ol class="breadcrumb">
<li class="breadcrumb-item"><a href="../index.html">TTM4115</a></li>
<li class="breadcrumb-item"><a href="index.html">Unit 8: Interactions</a></li>
<li class="breadcrumb-item active" aria-current="page">Implied Scenarios</li>
</ol>
</nav>
    </section>
    <section class="content">
<h1>Implied Scenarios</h1>
<p>With the sequence diagrams, we describe scenarios, that means, specific
and selected examples of the system interactions. Some diagrams cover
several scenarios. In most cases, a specification (a set of diagrams)
does not document <em>all</em> possible scenarios. This is because it is often
not practical to write down all scenarios, and especially when sketching
a system it may not be relevant to think about all scenarios right at
the beginning.</p>
<p>Once a system specification gets more mature, you need to also develop
an understanding how the system handles scenarios that your
specification does not explicitly document yet. These scenarios often
exist because reality is more complicated than an idealized interaction.</p>
<p>Of course, you could just not care and leave the choice about details to
the developer who implements the system. In fact, this is what often
happens. However, this is not what you want. This may cause bugs in the
system, cost a lot of time of fixing afterwards and in general leads to
surprises later on. (And if there is one thing we want to prevent, it is
<em>surprises</em>.)</p>
<h2>Message Loss</h2>
<p>Communication protocols provide different guarantees to the application
regarding the delivery of messages. However, even the most sophisticated
protocol cannot prevent that a communication link is failing and never
recovers. In these cases, the protocol cannot &quot;hide&quot; the problem from
the application, and the application itself needs to handle the
situation. The scenario <em>Lossy_1</em> for instance also implies scenario
<em>Lossy_2</em>, i.e., that the message is not received. The loss of a
message is written with a big cross.</p>

<div class="figure">
<img src="../../pages/unit-8-sd/figures/lossy-12.png" width="100%"/>
</div>
<p>So, whenever there is a diagram in which a message is sent, we should
check what would happen if this message got lost. Here are some possible
alternatives:</p>
<ul>
<li>
<p>The application is fine even if message <code>A</code> is lost. This can be the
case, for instance, if message <code>A</code> is one (of many) messages of the
same type that are sent periodically, and where it does not matter
if some of them get lost. A sensor that repeatedly sends some
measurements is a typical example. (It may be, however, important
that the sensor message <em>eventually</em> is sent, i.e., not all of them
are lost.</p>
</li>
<li>
<p>The most common solution is to use acknowledgment messages. This is
illustrated in <em>Lossy_3</em>. In case message <code>A</code> is lost, <code>Y</code> does not
send an acknowledgement. This is detected by <code>X</code> indirectly, through
the expiration of a timer. We show the timer here as a message of
<code>X</code> to itself.</p>
</li>
</ul>

<div class="figure">
<img src="../../pages/unit-8-sd/figures/lossy-3.png" width="100%"/>
</div>
<h2>Non-Causal Orderings</h2>
<p>The diagram below shows an interaction between parts in a movie ticket
system. At the end of the purchase process, the terminal sends a <em>pay</em>
message to the payment component. The payment component then forwards
<em>pay_ok</em> to the ticket printer. The terminal sends the movie selection
to the printer. The printer then prints the tickets. We ignore the case
that the payment fails.</p>

<div class="figure">
<img src="../../pages/unit-8-sd/figures/ex-6.png" width="100%"/>
</div>
<p>This specification has a trouble spot. The diagram indicates that the
<em>movie</em> message is received after the <em>pay_ok</em> message. In a real
system, we often have little control on the delay of message transfer.
The payment process within <em>payment</em> may also take different amounts of
time. In a real system it is therefore difficult, undesirable or even
impossible to ensure that <em>movie</em> is received after <em>pay_ok</em>.</p>
<p>One way to fix this situation is with a co-region as in <em>Movie Fix 1</em>,
to express explicitly that the two signals can arrive at the printer in
any order. The implementation of the printer must then take care of
this.</p>
<p>Another way is to change the way the entire interaction works. Instead
of sending <em>pay_ok</em> to the printer, the payment component may also
return it to the terminal, shown in <em>Movie Fix 2</em>. The terminal can then
send the <em>movie</em> message after the payment is confirmed. In this case,
we may also use a synchronous message for the payment as in <em>Movie Fix
2x</em>, since the terminal may anyways be waiting for it and not do
anything else.</p>
<p>Note: The original sequence diagram is not wrong, but depending on the
context, type of system and the subsequent development process and
implementation, the non-causal ordering of the events may be a source of
trouble.</p>

<div class="figure">
<img src="../../pages/unit-8-sd/figures/ex-7.png" width="100%"/>
</div>
<h2>Mixed Initiatives</h2>
<p>Consider the following alarm system. A sensor may detect an alarm and
send message <em>alarm</em> to a subscriber. The subscriber may then confirm
the alarm via message <em>confirm</em>. The alarm can also be stopped by the
sensor via <em>stop</em>. This is shown in the two diagrams below.</p>

<div class="figure">
<img src="../../pages/unit-8-sd/figures/ex-8.png" width="100%"/>
</div>
<p>The two different scenarios seem pretty straight-forward. However, these
two scenarios imply a third one: What should happen, if the alarm is
stopped by the sensor, but the subscriber confirms it, right before it
receives the stop message? We call this scenario a <em>mixed initiative</em>,
since it involves a situation where several participants may take
initiative and send a message. This situation may seem like a rare
coincidence, but it is only a matter of time and you will observe this
situation. We can illustrate it in another diagram:</p>

<div class="figure">
<img src="../../pages/unit-8-sd/figures/ex-9.png" width="100%"/>
</div>
<p>So what to do about this? If you only provide the sequence diagrams
above, it is not clear how an implementation should respond in this
situation, i.e., when an alarm is both confirmed and canceled. In this
case, you need to find out what the application should do. Depending on
what kind of alarm it is, the stopping may overrule the confirmation, or
vice versa. The diagram <em>Confirm and Stop</em> shows one way to address the
mixed initiative, using a simple comment.</p>

<div class="figure">
<img src="../../pages/unit-8-sd/figures/ex-91.png" width="100%"/>
</div>
    </section>
    <section class="content">
<h1>Epilogue: The Value of Sequence Diagrams</h1>
<p>You may ask yourself: <em>Why should I use sequence diagrams?</em> Can't you
just immediately build a state machine or write code for your system? Of
course, you could. But then again, would you build a house before
drawing it?</p>
<p>Depending on the project, sequence diagrams may be mandatory and part of
a formal specification, or they may just be something that you scribble
on a whiteboard or a piece of paper. The actual value of writing down
interactions by sequence diagrams comes then from the following:</p>
<ol>
<li>
<p><strong>They make you think about interactions.</strong></p>
</li>
<li>
<p><strong>They enable you to explain interactions to others, discuss
interactions in team.</strong></p>
</li>
<li>
<p><strong>They let you find trouble spots.</strong></p>
</li>
<li>
<p><strong>You can resolve intricate situations.</strong></p>
</li>
</ol>
<p>So, the value of sequence diagrams depends on how they are used in the
development process, and how they effectively improve the system design.
In some cases, just the fact that you sit down and sketch some
interactions changes your view on the system, leads to good design
choices and prevents errors in the first place. A single relevant
sequence diagram, sketched on a paper that uncovers problems in your
system design early, can save millions in whatever currency.</p>

    </section>
</div>
      </div>




    </div>

  </main>

  <footer class="blog-footer">

  </footer>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
  <script>
    anchors.add('h1').add('h2').add('h3');
    anchors.options.visible = 'always';
  </script>
  <script>
    








  </script>
</body>

</html>