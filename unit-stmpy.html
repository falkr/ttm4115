<html lang="en-US"><head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>TTM4115</title>
<meta property="og:title" content="TTM4115">
<meta property="og:locale" content="en_US">
<meta name="description" content="Design of Communicating Systems">
<meta property="og:description" content="Design of Communicating Systems">


<!--<link rel="stylesheet" type="text/css" href="style.css" />-->
<link href="https://fonts.googleapis.com/css?family=Merriweather:400,400italic,700,700italic|Source+Code+Pro|Source+Sans+Pro:200,300,400,600,400italic,600italic|Rock+Salt" rel="stylesheet" type="text/css">


<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>


<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP" crossorigin="anonymous">


<link rel="stylesheet" type="text/css" href="assets/style.css" />
<link rel="stylesheet" type="text/css" href="assets/bootstrap-icons.css">

<script src="assets/anchor.js"></script>
<script src="assets/script-aside.js"></script>
</head>
<body id="top">

<nav class="navbar navbar-expand-md navbar-dark " style="background-color:#666666"#2B65EC"> <!-- fixed-top -->
        <ul class="nav nav-pills">
        <li class="nav-item">
    <a class="nav-link" href="index.html" style="font-weight: bold")>TTM4115</a>
  </li>
        
  <li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Preparation</a>
    <div class="dropdown-menu">
      <a class="dropdown-item" href="prep-setup.html">Introduction and Setup</a>
      <div class="dropdown-divider"></div>
      <a class="dropdown-item" href="prep-modeling.html">Modeling and Deployment</a>
      <a class="dropdown-item" href="prep-statemachines.html">State Machines</a>
      <a class="dropdown-item" href="prep-user-requirements.html">User Requirements</a>
      <a class="dropdown-item" href="prep-stmpy.html">State Machines in Python</a>
      <a class="dropdown-item" href="prep-agile.html">Agile Development</a>
      <a class="dropdown-item" href="prep-communication.html">Communication</a>
      <a class="dropdown-item" href="prep-interactions.html">Interactions</a>
      <a class="dropdown-item" href="prep-components.html">Components</a>
    </div>
  </li>
  
  <li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Activities</a>
    <div class="dropdown-menu">
      <a class="dropdown-item" href="unit-setup.html">Team Setup</a>
      <div class="dropdown-divider"></div>
      <a class="dropdown-item" href="unit-modeling.html">Modeling and Deployment</a>
      <a class="dropdown-item" href="unit-statemachines.html">State Machines</a>
      <a class="dropdown-item" href="unit-user-requirements.html">User Requirements</a>
      <a class="dropdown-item" href="unit-stmpy.html">State Machines in Python</a>
  	  <a class="dropdown-item" href="unit-agile.html">Agile Development</a>
      <a class="dropdown-item" href="unit-communication.html">Communication</a>
      <a class="dropdown-item" href="unit-interactions.html">Interactions</a>
      <a class="dropdown-item" href="unit-components.html">Components</a>

      <div class="dropdown-divider"></div>
	  <a class="dropdown-item" href="unit-modeling-diagram-tips.html">Focus: Diagram Tips</a>
      <a class="dropdown-item" href="unit-statemachines-data.html">Focus: State Machines — Data vs. States</a>
	  <a class="dropdown-item" href="unit-statemachines-car.html">Focus: State Machines — Car Lock Example</a>
    </div>
  </li>
  
  <li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Deliveries</a>
    <div class="dropdown-menu">
      <a class="dropdown-item" href="deliveries.html">Deliveries Overview</a>
      <a class="dropdown-item" href="deliveries-project.html">Semester Project</a>
      <div class="dropdown-divider"></div>
      <a class="dropdown-item" href="deliveries-t1.html">System Spec, version 1</a>
      <a class="dropdown-item" href="deliveries-i1.html">Feedback on version 1</a>
      <div class="dropdown-divider"></div>
      <a class="dropdown-item" href="deliveries-t2.html">System Spec, version 2</a>
      <a class="dropdown-item" href="deliveries-i2.html">Feedback on version 2</a>
      <div class="dropdown-divider"></div>
      <a class="dropdown-item" href="deliveries-t3.html">System Spec, final version</a>
      <a class="dropdown-item" href="deliveries-i3.html">Individual Reflection</a>
    </div>
  </li>

  <li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Tools</a>
    <div class="dropdown-menu">
      <a class="dropdown-item" href="tools.html">Tools Overview</a>
      <div class="dropdown-divider"></div>
      <a class="dropdown-item" href="tools-python.html">Python</a>
	    <a class="dropdown-item" href="tools-gui.html">Python GUIs with appJar</a>
      <a class="dropdown-item" href="tools-notebooks.html">Python Notebooks</a>
      <a class="dropdown-item" href="tools-mqtt.html">MQTT</a>
      <a class="dropdown-item" href="tools-stmpy.html">STMPY</a>
	  <a class="dropdown-item" href="tools-base.html">Base Architecture</a>
    </div>
  </li>
  
  <li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Learning</a>
    <div class="dropdown-menu">
      <a class="dropdown-item" href="learning-goals.html">Learning Goals</a>
      <a class="dropdown-item" href="learning-tbl.html">Team-Based Learning</a>
      <a class="dropdown-item" href="learning-teamwork.html">Teamwork Procedures</a>
      <a class="dropdown-item" href="learning-reflection.html">Reflection</a>
      <a class="dropdown-item" href="feedback.html">Feedback</a>
      <a class="dropdown-item" href="learning-grading.html">Grading</a>
      <!--<a class="dropdown-item" href="learning-areas.html">Working Areas</a>-->
      <!--<a class="dropdown-item" href="learning-expectations.html">Expectations</a>-->
    </div>
  </li>
  <!--
  <li class="nav-item">
    <a class="nav-link" href="#">Blackboard</a>
  </li>-->
</ul>

<div class="navbar-nav flex-row ml-md-auto d-none d-md-flex"></div>
             <a class="navbar-brand" href="https://ntnu.edu" title="NTNU Homepage">
      	<svg width="100" height="30">
      		<image xlink:href="https://innsida.ntnu.no/innsida-theme/images/ntnu-graphics/ntnu_logo_white.svg" 
      		src="https://innsida.ntnu.no/innsida-theme/images/ntnu-graphics/ntnu_logo_white.png" width="100%" height="100%" alt="NTNU Logo"></image>
      	</svg>
      </a>
    </nav>


<div class="page">
    </section>
    <section class="content">
<h1 id="state-machines-in-python">State Machines in Python</h1>
<p>This week you are going to implement state machines in Python. As a delivery you should keep a reflection document about your work where you include screen shots and your observations. The running code is in itself a feedback if you got it right.</p>

<h3 id="installation">Installation</h3>
<p>Make sure you have <a href="prep-stmpy.html#jupyter-notebooks-introducing-stmpy">STMPY and Jupyter lab set up</a> like in the preparation. In case you have troubles with Python:</p>
<ul>
<li>Use a limited amount of time to try fixing the installation.</li>
<li>Share a working installation in you team, by sharing your screen.</li>
<li>Run the Notebooks <a href="https://mybinder.org/v2/gh/falkr/stmpy-notebooks/HEAD">using Binder</a></li>
<li>Fix your installation later</li>
</ul>

<p>In case your notebook gets stuck, you can restart its Python kernel in the menu <code>Kernel</code>.</p>

<h3 id="todays-challenge">Today’s Challenge</h3>
<p>The tasks today are not particularly difficult, but a lot of details must come together to get it right. Also, as code is involved, it may be difficult for everyone in the team to have exactly the same understanding at the same time. So, take some time to explain the code to each other. Also, consider to repeat some parts of the assignment after the team activity on tour own.</p>

    </section>
    <section class="content">
<h1 id="task-1-traffic-light">Task 1: Traffic Light</h1>

<div class="figure">
<img src="figures/statemachines/notebook-traffic-light.jpg" alt="A simple user interface representing the traffic light in the output of a cell in a Jupyter notebook." width="100%"/>
<span name="figures/statemachines/notebook-traffic-light.jpg">&nbsp;</span>
<aside name="figures/statemachines/notebook-traffic-light.jpg"><p><p>A simple user interface representing the traffic light in the output of a cell in a Jupyter notebook.</p>
</p></aside>
</div>
<ul>
<li>Look at the provided code of the traffic light, and run it.</li>
<li>Create a state machine diagram by looking at the code.</li>
<li>Create a copy of the diagram, but use more entry and exit actions on the states.</li>
<li>Create another implementation of the traffic light state machine that uses more entry and exit actions in another cell and run it.</li>
</ul>

    </section>
    <section class="content">
<h1 id="task-2-kitchen-timer">Task 2: Kitchen Timer</h1>

<div class="figure">
<img src="figures/statemachines/notebook-kitchen-timer.jpg" alt="A simple user interface representing the kitchen timer in the output of a cell in a Jupyter notebook." width="100%"/>
<span name="figures/statemachines/notebook-kitchen-timer.jpg">&nbsp;</span>
<aside name="figures/statemachines/notebook-kitchen-timer.jpg"><p><p>A simple user interface representing the kitchen timer in the output of a cell in a Jupyter notebook.</p>
</p></aside>
</div>
<ul>
<li>Use the code provided for the simple use interface of the kitchen timer.</li>
<li>Get the state machine diagram you built previously, and create it in STMPY.</li>
<li>Run the state machine and validate if you are satisfied with how it works.
<ul>
<li>Use a shorter timeout, like 4 seconds instead of 15 minutes.</li>
</ul></li>
</ul>

    </section>
    <section class="content">
<h1 id="task-3-head-lamp">Task 3: Head Lamp</h1>
<p>You should design the state machine for the controller of a head lamp. This headlamp is used for outdoor activities. It has an infrared sensor attached, so that the LED can be switched on and off without fiddling with delicate buttons. It’s enough to swipe the hand in front of the sensor and the LED turns off. Another swipe turns the LED on again. However, to prevent the LED from turning off unintentionally, the swipe has to happen within a short time. If the hand is in front of the IR sensor for more than one second, the gesture is ignored.</p>
<p>The communication diagram below shows the context of the controller. It receives the signals <code>hand</code> and <code>no_hand</code> from the IR sensor, and it controls the LED with signals on and off.</p>

<div class="figure">
<img src="figures/statemachines/head-lights-1.svg" width="100%"/>
</div>
<h2 id="state-machine-design">State Machine Design</h2>
<p>Design first a state machine diagram for the problem.</p>
<ul>
<li>Assume the controller starts in a state with the LED switched off and the IR sensor not detecting any hand.</li>
<li>Use the action <code>on()</code> and <code>off()</code> to control the lamp.</li>
<li>Pay attention to the control state. Which situation does each of them represent? (In this example, you have only a few states. Meaningful names for them can make the task easier.)</li>
<li>Can you use some form of symmetry in the diagram to get more confidence in the solution?</li>
</ul>

<h2 id="implementation-in-python">Implementation in Python</h2>
<p>Create now from the state machine diagram a solution in Python using the STMPY patterns and libraries, like before.</p>
<ul>
<li>Start with the code provided in notebook <strong>Head Lamp</strong></li>
<li>The IR sensor is represented with a checkbox. When you select the checkbox, it symbolizes that the hand is in front of the sensor.</li>
</ul>

<div class="figure">
<img src="figures/statemachines/notebook-head-light.jpg" alt="A simple user interface representing the head lamp in the output of a cell in a Jupyter notebook." width="100%"/>
<span name="figures/statemachines/notebook-head-light.jpg">&nbsp;</span>
<aside name="figures/statemachines/notebook-head-light.jpg"><p><p>A simple user interface representing the head lamp in the output of a cell in a Jupyter notebook.</p>
</p></aside>
</div>
<h2 id="debugging-the-state-machine">Debugging the State Machine</h2>
<p>When running the implementation, does the state machine behave as intended? If not, what is the problem? Do you have to go back and also change the diagram, or is it more technical problems with the code? (Or a combination?)</p>

    </section>
    <section class="content">
<h1 id="deliveries">Deliveries</h1>

<h3 id="reflection-document-about-state-machine-implementation">Reflection Document about State Machine Implementation</h3>
<ul>
<li>Write down your observations.</li>
<li>Document the results.</li>
<li>Pay especially attention on the process around the head lamp, and delivering it in a high-quality process.</li>
<li>Deliver on Teams</li>
</ul>
<h3 id="team-reflection">Team Reflection</h3>
<ul>
<li>As always, update your document about the team process and roles.</li>
</ul>
<h3 id="individual-reflection">Individual Reflection</h3>
<ul>
<li>Fill out the <a href="https://forms.office.com/Pages/ResponsePage.aspx?id=cgahCS-CZ0SluluzdZZ8BSxiepoCd7lKk70IThBWqdJUQUQxNEVLOTBZMDZGNkJBM1Y2NjZCTzhWSi4u" class="arrow">individual reflection survey</a>.</li>
</ul>

    </section>
</div>


<footer></footer>
<script>
  anchors.options.visible = 'touch';
  anchors.add("h1, h2, h3");
</script>
</body>
</html>