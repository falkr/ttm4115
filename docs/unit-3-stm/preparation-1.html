<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">
  <meta name="generator" content="">
  <title>TTM4115</title>
  <link rel="canonical" href="https://edu.iik.ntnu.no">
  <!-- Bootstrap core CSS -->
  <link href="../assets/bootstrap.min.css" rel="stylesheet">
  <!-- Custom styles for this template -->
  <link href="../assets/style.css" rel="stylesheet">
  <link rel="stylesheet" href="../assets/bootstrap-icons.css">
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="../assets/anchor.js"></script>
  <script src="../assets/script-aside.js"></script>
  <style type="text/css">
    a.ntnu-button {
    font: 600 14px "Source Sans Pro", Georgia, serif;
    background: #fff;
    color: #00509e;
    border: 1px solid #00509e;
    border-color: #00509e !important;
    border-style: solid !important;
    border-radius: 10rem;
    display: inline-block;
    padding: 5px 15px;
    height: auto;
    font-weight: bold;
    line-height: 1.5em;
    text-align: center;
    vertical-align: top;
    cursor: pointer;
    text-decoration: none
}

a.ntnu-button:hover {
    background: #00509e;
    color: #fff;
    text-decoration: none
}
.person-card img {
  width: 56px;
  border: 1px solid #eee;
}

.person-card-name {
  font-weight: 600;
}

.person-card-email {
  font-size: 0.8em;
}

.person-card-detail {
  font-size: 0.8em;
}
div.check ul,
div.check ul li {
  padding: 0;
  margin: 0;
  list-style: none;
}

div.check ul {
  margin: 2em 0;
}

div.check ul li {
  margin: 1em;
  margin-left: 3em;
}

div.check ul li:before {
  content: '\f26a';
  font-family: bootstrap-icons !important;
  font-size:20;
  float: left;
  margin-left: -1.5em;
  color: #1481b8;
}
div.delivery p {
  padding: 10px;
  background-color: #ffd9ab;
  font-family: "Source Sans Pro", Georgia, serif;
  border-radius: 5px;
  border-left: 6px solid #fc8c03; 
}
  
div.delivery p::before {
  content: 'Delivery: ';
  font-family: "Source Sans Pro", Georgia, serif;
  color: #fc8c03;
  display: inline;
  font-weight: bold;
}
div.figure {
  padding: 20px 0 20px 0;
  width: 100%;
}

div.figurefullwitdth {
  padding: 20px 0 20px 0;
  margin-left: -33px;
  margin-right: -33px;
  width: 100%;
}
div.goals ul,
div.goals ul li {
  padding: 0;
  margin: 0;
  list-style: none;
}

div.goals ul {
  margin: 2em 0;
}

div.goals ul li {
  margin: 1em;
  margin-left: 3em;
}

div.goals ul li:before {
  content: '\f26a';
  font-family: bootstrap-icons !important;
  font-size: 20;
  float: left;
  margin-left: -1.5em;
  color: #00509e;
}
.w3collapsible {
  background-color:#f0e9db;
  color: #868279; 
  padding: 8px 18px 8px 8px;
  cursor: pointer;
  width: 100%;
  border: none;
  border-radius: 3px 3px 0 0;
  text-align: left;
  outline: none;
  font-size: 15px;
}

.w3active, .w3collapsible:hover {
  background-color: #f0e9cb;
}

.w3content {
  filter: blur(3px);
  padding: 0 18px;
  display: block;
  overflow: hidden;
  background-color: #f3f3f3;
  margin-bottom: 15px;
}




table.weekplan {
  width: 100%;
  table-layout: fixed;
}

table.weekplan td {
  background-color: #1481b8;
  color: white;
}

table.weekplan td, table.weekplan th {
  text-align: center;
}

table.weekplan td:empty {
  background-color: white;
}

table.weekplan td:first-child {
  background-color: white;
  color: grey;
}

table.weekplan a {
  font-weight:bold;
  color: white;
  text-decoration: underline;
}

  </style>
</head>

<body>
  
  



<nav class="navbar navbar-expand-lg navbar shadow-sm">
  <div class="container-fluid">
    <a class="navbar-brand" href="https://ntnu.edu" title="NTNU Homepage">
      <img id="header_logo" alt="NTNU Hjemmeside" width="120px" src="https://www.ntnu.no/o/ntnu-theme/images/logo_ntnu.svg" height="23px">
    </a>
    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavDropdown">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="../index.html">TTM4115</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Units
          </a>
          <ul class="dropdown-menu dropdown-menu">
            <a class="dropdown-item" href="../unit-1-setup/index.html">Unit 1: Introduction and Setup</a>
            <a class="dropdown-item" href="../unit-2-models/index.html">Unit 2: Modeling and Deployment Diagrams</a>
            <a class="dropdown-item" href="../unit-3-stm/index.html">Unit 3: State Machines</a>
            <a class="dropdown-item" href="../unit-4-req/index.html">Unit 4: User Requirements</a>
            <a class="dropdown-item" href="../unit-5-stmpy/index.html">Unit 5: State Machines in Python</a>
            <a class="dropdown-item" href="../unit-6-agile/index.html">Unit 6: Agile Development</a>
            <a class="dropdown-item" href="../unit-7-comm/index.html">Unit 7: Communication</a>
            <a class="dropdown-item" href="../unit-8-sd/index.html">Unit 8: Interactions</a>
            <a class="dropdown-item" href="../unit-9-comp/index.html">Unit 9: Components</a>
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Project
          </a>
          <ul class="dropdown-menu dropdown-menu">
            <a class="dropdown-item" href="../project/index.html">Deliveries</a>
            <a class="dropdown-item" href="../project/deliveries-t1.html">Specification 1</a>
            <a class="dropdown-item" href="../project/deliveries-i1.html">Feedback on Specification 1</a>
            <a class="dropdown-item" href="../project/deliveries-t2.html">Specification 2</a>
            <a class="dropdown-item" href="../project/deliveries-i2.html">Feedback on Specification 2</a>
            <a class="dropdown-item" href="../project/deliveries-t3.html">Specification 3 (Final)</a>
            <a class="dropdown-item" href="../project/deliveries-i3.html">Feedback on Specification 3</a>
            
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Learning
          </a>
          <ul class="dropdown-menu dropdown-menu">
            <a class="dropdown-item" href="../learning/feedback.html">Feedback</a>
            <a class="dropdown-item" href="../learning/goals.html">Learning Goals</a>
            <a class="dropdown-item" href="../learning/grading.html">Grading</a>
            <a class="dropdown-item" href="../learning/reflection.html">Reflection</a>
            <a class="dropdown-item" href="../learning/tbl.html">Team-Based Learning</a>
            <a class="dropdown-item" href="../learning/teamwork.html">Teamwork</a>
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Tools
          </a>
          <ul class="dropdown-menu dropdown-menu">
            <a class="dropdown-item" href="../tools/index.html">Tools</a>
            <!--<a class="dropdown-item" href="../tools/tools-python.html">Python</a>-->
            <a class="dropdown-item" href="../tools/tools-gui.html">GUIs in Python</a>    
            <a class="dropdown-item" href="../tools/tools-mqtt.html">MQTT</a>            
            <a class="dropdown-item" href="../tools/tools-notebooks.html">Notebooks</a>
            <a class="dropdown-item" href="../tools/tools-stmpy.html">STMPY</a>            
          </ul>
        </li>
      </ul>
      <div class="bg-light border ms-auto"></div>
        <div>
        <a class="nav-link" href="../schedule.html"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-calendar3" viewBox="0 0 16 16">
          <path d="M14 0H2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM1 3.857C1 3.384 1.448 3 2 3h12c.552 0 1 .384 1 .857v10.286c0 .473-.448.857-1 .857H2c-.552 0-1-.384-1-.857V3.857z"/>
          <path d="M6.5 7a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
        </svg></a>
      </div>
    </div>
  </div>
</nav>






  <main class="container">

    <div class="row g-5 justify-content-md-center pb-5">



      <div class="col-md-9" style="margin-top: 6rem;">
        <div class="page">
    <section class="content">
<nav style="--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E&#34;);" aria-label="breadcrumb">
<ol class="breadcrumb">
<li class="breadcrumb-item"><a href="../index.html">TTM4115</a></li>
<li class="breadcrumb-item"><a href="index.html">Unit 3: State Machines</a></li>
<li class="breadcrumb-item active" aria-current="page">Example: Traffic Light</li>
</ol>
</nav>
<h2>Hello, State Machines!</h2>
<p>State machines are one of the fundamental diagrams to describe behavior.
They are used to specify communication protocols, logic in embedded systems, and in general behavior where events need to be coordinated in a complex way.
Here is an intuitive example of a sketch for a state machine that illustrates in a compact way how a traffic light works:</p>

<div class="figure">
<img src="../../pages/unit-3-stm/figures/state-machines-traffic-light.jpg" alt="A state machine describing the sequence of phases in a traffic light." width="100%"/>
<span name="../../pages/unit-3-stm/figures/state-machines-traffic-light.jpg">&nbsp;</span>
<aside name="../../pages/unit-3-stm/figures/state-machines-traffic-light.jpg"><p><p>A state machine describing the sequence of phases in a traffic light.</p>
</p></aside>
</div>
<p>Another example is the specification of the TCP protocol, also using a state machine:</p>

<div class="figure">
<img src="../../pages/unit-3-stm/figures/state-machines-tcp.jpg" alt="The TCP protocol uses state machines to describe parts of its behavior." width="100%"/>
<span name="../../pages/unit-3-stm/figures/state-machines-tcp.jpg">&nbsp;</span>
<aside name="../../pages/unit-3-stm/figures/state-machines-tcp.jpg"><p><p>The TCP protocol uses state machines to describe parts of its behavior.</p>
</p></aside>
</div>
<h2>Why State Machines?</h2>
<p>Have a look at the short interview section with Richard Stallman (starting at 0:25:25), about the construction of the operating system kernel for GNU:</p>

<div class="figure">
<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/jw8K460vx1c?start=1525" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<span name="jw8K460vx1c">&nbsp;</span>
<aside name="jw8K460vx1c"><p><p>Interview with Richard Stallman, from  0:25:25 until 0:26:30, from the movie <em>Revolution OS</em>. You may watch the entire movie later.</p>
</p></aside>
</div>
<p>When he says <em>&quot;It took us years to get the thing to work.&quot;</em>, you can imagine how frustrating it can be to handle concurrent behavior and not getting it under control.
There are problems that look simple but that can quickly grow complex, and state machines offer a way to handle complexity in such situations.</p>

<span name="c07d7d"></span><aside name="c07d7d"><p>Have a look at this blog post from developer Alan Skorkin, <a href="https://www.skorks.com/2011/09/why-developers-never-use-state-machines/">Why Developers Never Use State Machines</a>. It describes how developers often detect to late that they should have started with a state machine.</p>
</aside>
<p>A bit of a problem with state machines is that developers often only understand they should have used a state machine for a problem <em>after</em> it is too late, and they already spent much effort on trying to solve a task in other ways. <strong>We tend to underestimate the amount of concurrency and complexity that some situations contain.</strong></p>

<p>With state machines, you can structure complex behavior such that:</p>
<ul>
<li>It is easy to debug and understand precisely what happened.</li>
<li>Only one thing happens at a time.</li>
<li>You have detailed control over concurrency.</li>
</ul>

<h2>Understanding State Machines</h2>
<p>Given the complexity they handle, state machines are relatively easy to understand as they only contain a handlful of concepts to model behavior.
There is also more than one way to approach an understanding of state machines, and in this course you will get the chance to approach state machines from three angles:</p>
<ul>
<li>State machines as a diagram (following below)</li>
<li>State machines as abstract machines that execute some behavior (later below)</li>
<li>State machines as implementation pattern in code (in another unit)</li>
</ul>
<p>This week, we will introduce state machines by their diagrams and explain their meaning by describing an abstract machine. Later, we will introduce how you can implement state machines in Python.
This gives you three different entry points into the concept of state machines.</p>

    </section>
    <section class="content">
<h1>Example: Traffic Light</h1>
<p>Let's assume we need to describe how a traffic light works.
One idea is to just take pictures of a traffic light, like this:</p>

<div class="figure">
<img src="../../pages/unit-3-stm/figures/traffic-light-1.jpg" alt="A set of pictures of a traffic light that represent the different states it can be in." width="100%"/>
<span name="../../pages/unit-3-stm/figures/traffic-light-1.jpg">&nbsp;</span>
<aside name="../../pages/unit-3-stm/figures/traffic-light-1.jpg"><p><p>A set of pictures of a traffic light that represent the different states it can be in.</p>
</p></aside>
</div>
<p>That already helps; the photos describe the phases in which we can observe the traffic light. Whenever we look at the traffic light, it is in one of the phases described by the photos. For easier reference we have even given these photos some labels, intuitively <em>red</em>, <em>red-yellow</em>, <em>green</em> and <em>yellow</em>. (The <em>red-yellow</em> is common in many, but not all countries.)</p>

<p>The photos already help explaining the traffic light. But imagine you want to explain on paper in which sequence a traffic light switches its lights. One way is text, but a simpler way is to add arrows between the photos, like this:</p>

<div class="figure">
<img src="../../pages/unit-3-stm/figures/traffic-light-2.jpg" alt="The photos of the traffic light in a sequential order." width="100%"/>
<span name="../../pages/unit-3-stm/figures/traffic-light-2.jpg">&nbsp;</span>
<aside name="../../pages/unit-3-stm/figures/traffic-light-2.jpg"><p><p>The photos of the traffic light in a sequential order.</p>
</p></aside>
</div>
<p>Of course, the picture above is a simplification. Some trafic lights are switched off at night and just blink yellow. The same happens as a default state in case there is an error in the controller. We can show this blinking with the two additional photos <em>blink-off</em> and <em>blink-on</em>. The two arrows between them show how the blinking is created by two phases, one with the yellow light on and one with all lights off. We also show that blinking can be started from any of the other phases, because an error can always happen, and the lights may be switched off at any time. When we get out of the blinking sequence, we go towards the phase <em>red</em> for safety.</p>

<div class="figure">
<img src="../../pages/unit-3-stm/figures/traffic-light-3.jpg" alt="A more advanced state machine for the traffic light." width="100%"/>
<span name="../../pages/unit-3-stm/figures/traffic-light-3.jpg">&nbsp;</span>
<aside name="../../pages/unit-3-stm/figures/traffic-light-3.jpg"><p><p>A more advanced state machine for the traffic light.</p>
</p></aside>
</div>
<p>That's a complete and detailed description of a traffic light. As one last thing we add an arrow to mark in which phase a traffic light starts once it is switched on for the first time. For safety, we put it into <em>red</em> first.</p>
<p>The photos depict the traffic light in phases.
Some of these phases are shorter than others, but all of them last for some time.
In the traffic light, these phases have also in common that they correspond to lights being switched on or off.
In state machine terminology, we call these phases <strong>states</strong>, and sometimes for clarification we say it is a <strong>control state</strong>, to distinguish the term from the more general English word <em>state</em>.</p>
<p>The arrows between the states are called <strong>transitions</strong>.</p>
<p>Maybe you see nothing special here yet, and you may think that this is really easy.
One word of caution however: Beginners with state machines have often trouble to distinguish between states and transitions once they start creating their own machines. So, remember this simple example to understand the difference between them, as a guide for cases where the distinction between states and transitions is maybe less obvious.</p>

<nav class="d-flex justify-content-between">
<div></div>
<div></div>
<a type="button" href="preparation-2.html" class="page-link rounded">Next: State Machine Diagrams
<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg" class="bi bi-arrow-right-short" viewBox="0 0 16 16" id="arrow-right-short"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z" /></svg>
</a>
    </section>
</div>
      </div>




    </div>

  </main>

  <footer class="blog-footer">

  </footer>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
  <script>
    anchors.add('h1').add('h2').add('h3');
    anchors.options.visible = 'always';
  </script>
  <script>
    












  </script>
</body>

</html>